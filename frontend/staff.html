<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staff Login</title>

  <!-- Styles -->
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="ui.css">
  <link rel="stylesheet" href="responsive.css">
  <link rel="stylesheet" href="app.css">
  <link rel="stylesheet" href="modern-theme.css">
</head>

<body class="modern-ui">

  <!-- PAGE CONTAINER -->
  <main class="container" style="padding:24px; max-width:420px; margin:auto;">

    <!-- LOGIN CARD -->
    <section class="card">

      <h2 style="margin-top:0;">Staff Login</h2>
      <p style="color:var(--muted);">
        Enter your staff credentials to continue
      </p>

      <input
        id="email"
        type="email"
        placeholder="Email"
        style="width:100%; margin-bottom:12px;"
      >

      <input
        id="password"
        type="password"
        placeholder="Password"
        style="width:100%; margin-bottom:12px;"
      >

      <button
        class="btn btn-primary"
        style="width:100%;"
        onclick="login()"
      >
        Login
      </button>

      <p id="msg" style="color:#dc2626; margin-top:12px;"></p>

    </section>

  </main>

  <!-- SCRIPT -->
  <script>
    async function login() {
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();
      const msg = document.getElementById("msg");

      msg.innerText = "";

      if (!email || !password) {
        msg.innerText = "Please enter email and password";
        return;
      }

      try {
        const res = await fetch("/api/staff/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        });

        const data = await res.json();

        if (!res.ok) {
          msg.innerText = data.message || "Login failed";
          return;
        }

        localStorage.setItem("staffId", data.staffId);
        localStorage.setItem("staffName", data.name);
        localStorage.setItem("staffRole", data.role);

        window.location.href = "/dashboard.html";

      } catch (err) {
        console.error(err);
        msg.innerText = "Server error. Try again.";
      }
    }
  </script>

</body>
</html>
